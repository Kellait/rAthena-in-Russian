//===== rAthena Script =======================================
//= Arch Bishop Job Quest
//===== By: ==================================================
//= L0ne_W0lf
//= Credits: Gepard
//===== Current Version: =====================================
//= 2.0
//===== Compatible With: =====================================
//= rAthena Project
//===== Description: =========================================
//= [Official Conversion]
//= Job change Quest from Priest / High Priest -> Arch Bishop.
//===== Additional Comments: =================================
//= 1.0 First version.
//= 1.1 Fixed class checks for arch bishops.
//= 1.2 Fixed Job tags typos.
//= 1.3 Made some NPC's into duplicates and fixed some && / || checks. [Masao]
//= 1.4 Fixed Job_Archbishop/Job_Archbishop_T typos. [Euphy]
//= 1.5 Redone the whole Script. [Masao]
//= 1.5a Fixed little typo in Baby Priest & Baby Arch Bishop checks. [Masao]
//= 1.5b More small fixes. [Euphy]
//= 1.6 Fixed bugs where players unable to continue the quest. [Joseph]
//= 1.7 Updated script, many bugs fixed. [Euphy]
//= 1.7a Moved warps to separate file. [Euphy]
//= 1.8 Bug fixes and corrections. [Euphy]
//= 1.9 Added GM management function. [Euphy]
//= 2.0 Added VIP features. [Euphy]
//============================================================
//= Translated en -> ru [Akaineko] 
//============================================================

prt_church,103,88,3	script	Praying Minister#arch	60,{
	if (BaseJob != Job_Priest) {
		if (Class == Job_Arch_Bishop || Class == Job_Arch_Bishop_T || Class == Job_Baby_Bishop) {
			mes "[Отрешённый священник]";
			mes "Ах! Архиепископ.";
			mes "Ты достиг"+(Sex?"":"ла")+" света.";
			mes "Приноси людям счастье в своих странствиях.";
			close;
		}
		mes "[Отрешённый священник]";
		mes "Пред Всемогущим Богом Одином нет никого мудрее и нет никого милосерднее.";
		next;
		mes "[Отрешённый священник]";
		mes "Служителям Божьим должно быть усердными. Никогда нельзя лениться служить Одину.";
		next;
		mes "[Отрешённый священник]";
		mes "Я слышал, что в наши дни священнослужители стали забывать свой путь и предаваться мирским наслаждениям.";
		next;
		mes "[Отрешённый священник]";
		mes "Если тебе встретится такой священник, не мог"+(Sex?"":"ла")+" бы ты направить его в Пронтерскую Церковь?";
		next;
		mes "[Отрешённый священник]";
		mes "Их окружает особая аура, ты легко их опознаешь. Я намерен помочь им стать достойными служителями Одина.";
		close;
	}
	if ((BaseLevel > 98) && (JobLevel > 49)) {
		if (job_arch == 0) {
			if (SkillPoint) {
				mes "Нельзя изменить профессию, не использовав все свободные очки умений~";
				close;
			}
			if (VIP_SCRIPT) {
				callfunc "VIP_Third_Class";
				set job_arch,1;
				setquest 2187;
				next;
			}
			mes "[Отрешённый священник]";
			mes "Пред Всемогущим Богом Одином нет никого мудрее и нет никого милосерднее.";
			next;
			mes "[Отрешённый священник]";
			mes "Служителям Божьим должно быть усердными. Никогда нельзя лениться служить Одину.";
			next;
			mes "[Отрешённый священник]";
			mes (Sex?"Брат":"Сестра")+", как поживаешь? Наслаждаешься ли полнотой жизни, данной тебе Богом? Наполняешь ли жизнь служением Ему?";
			next;
			mes "[Отрешённый священник]";
			mes "Мы -- посланники Божьи, и наши действия идут от имени Бога. Мы никогда не должны забывать об этом.";
			next;
			mes "[Отрешённый священник]";
			mes "Мы всегда должны говорить правду и никогда не должны предаваться лжи и обману.";
			next;
			mes "[Отрешённый священник]";
			mes (Sex?"Брат":"Сестра")+"...";
			mes "Сколь ревностно ни служи мы Богу, мы всё же остаёмся людьми.";
			mes "Эгоизм может овладеть нами, и важно осознать этот момент.";
			next;
			mes "[Отрешённый священник]";
			mes "Поэтому мы не забываем правила благочестия и несём волю Божью, выраженную в правильном поведении.";
			next;
			select("Могу ли и я стать "+(Sex?"таким":"такой")+"?");
			mes "[Отрешённый священник]";
			mes "Это хороший вопрос. Есть множество методов, но я рекомендую следующий.";
			next;
			mes "[Отрешённый священник]";
			mes "Слышал"+(Sex?"":"а")+" ли ты когда-нибудь о ^3131FFСвященном Паломничестве^000000?";
			mes "Это путешествие в святое место, дабы вознести молитву о Божьей милости и защите.";
			next;
			mes "[Отрешённый священник]";
			mes "Помолившись Одину в священном месте, чувствуешь себя так, будто заново родился.";
			next;
			mes "[Отрешённый священник]";
			mes "Что ты об этом думаешь? Хочешь ли совершить Священное Паломничество?";
			next;
			switch(select("Да, хочу.:Я подумаю об этом.")) {
			case 1:
				mes "[Отрешённый священник]";
				mes "Это правильный подход. Тот, кто испытал все прелести жизни, должен освежить тело и душу и вознестись до высот истинного служителя Одина.";
				next;
				mes "[Отрешённый священник]";
				mes "В далёких джунглях есть деревушка Умбала. Народ её живёт в единении с природой.";
				next;
				mes "[Отрешённый священник]";
				mes "Отправляйся туда и найди отца Даяна.";
				mes "Скажи ему:";
				mes "''^3131FFЯ хочу совершить Священное Паломничество^000000''.";
				next;
				mes "[Отрешённый священник]";
				mes "Он очень стар и плохо слышит. Нужно говорить с ним громко и разборчиво. Надеюсь, с этими советами ты сможешь найти свой путь к божественному свету Одина.";
				set job_arch,1;
				setquest 2187;
				close;
			case 2:
				mes "[Отрешённый священник]";
				mes "Мммм...";
				mes "Священное Паломничество не такое уж и трудное дело. Начав путь к Богу, ты уже не сможешь свернуть.";
				next;
				mes "[Отрешённый священник]";
				mes "Если тебе посчастливится изменить своё мнение, я буду рад помочь.";
				close;
			}
		}
		mes "[Отрешённый священник]";
		mes "Как продвигаются твои дела? Повстречал"+(Sex?"ся":"ась")+"ли ты уже с отцом Даяном в Умбале?";
		close;
	}
	mes "[Отрешённый священник]";
	mes "Пред Всемогущим Богом Одином нет никого мудрее и нет никого милосерднее.";
	next;
	mes "[Отрешённый священник]";
	mes "Служителям Божьим должно быть усердными. Никогда нельзя лениться служить Одину.";
	next;
	mes "[Отрешённый священник]";
	mes "Я слышал, что в наши дни священнослужители стали забывать свои тренировки и предаваться мирским наслаждениям.";
	next;
	mes "[Отрешённый священник]";
	mes "Если тебе встретится такой священник, не мог"+(Sex?"":"ла")+" бы ты направить его в Пронтерскую Церковь?";
	next;
	mes "[Отрешённый священник]";
	mes "Их окружает особая аура, ты легко их опознаешь. Я намерен помочь им стать достойными служителями Одина.";
	close;
}

umbala,137,227,5	script	Utan Boy#arch	787,{
	mes "[Утанский мальчик]";
	mes "........";
	close;
}

umbala,139,227,3	script	Priest#arch	60,{
	if (job_arch == 0) {
		mes "[Священник]";
		mes "Ун...ба... Унба?";
		close;
	} else if (job_arch == 1) {
		mes "[Священник]";
		mes "Ун...ба... Унба?";
		next;
		mes "[Утанский мальчик]";
		mes "...............";
		next;
		mes "[Священник]";
		mes "Как же... там?";
		mes "Хмм... ну...";
		mes "Ум...ма? Ума...ума?";
		emotion e_swt;
		next;
		mes "[Утанский мальчик]";
		mes "...............";
		next;
		mes "[Священник]";
		mes "Ооххх......";
		mes "Малыш. Я устал.";
		mes "Хохохохо.";
		next;
		mes "- бормотание~ -";
		next;
		mes "[Священник]";
		mes "хахахахаха.";
		mes "хухухуху. хмхм.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Добрый день. Вы... отец Даян?";
		next;
		mes "[Священник]";
		mes "Хм?";
		next;
		mes "- Он оборачивается в вашу сторону.-";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Вы отец Даян, не так ли?";
		next;
		mes "[Священник]";
		mes "- ворчание... -";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Отец! Дай~ян! Так?!";
		next;
		mes "[Отец Даян]";
		mes "Ах~, да.";
		mes "Так, так.";
		mes "Я Даян. Здравствуй, "+(Sex?"брат.":"сестра.");
		next;
		mes "- Улыбка расплывается -";
		mes "- на лице старика. -";
		next;
		mes "[Отец Даян]";
		mes "Забыл слуховой аппарат. Хехе.";
		mes "Ну, зачем ты здесь?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Хмм, мне хотелось сказать вам...";
		next;
		input .@inputstr$;
		mes "[" + strcharinfo(0) + "]";
		mes "" + .@inputstr$ + ".";
		next;
		if (.@inputstr$ != "I'm here for the Holy Pilgrimage" && .@inputstr$ != "Я хочу совершить Священное Паломничество" ) { 
			mes "- Отец Даян, похоже, вас не -";
			mes "- понимает. Он только глазеет -";
			mes "- на вас и улыбается.";
			next;
			mes "[Священник]";
			mes "М? Что?";
			close;
		}
		mes "[Отец Даян]";
		mes "..............?";
		next;
		mes "- Он поворачивается к вам ухом. -";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "^FF0000" + .@inputstr$ + "!^000000";
		mes "^FF0000" + .@inputstr$ + "!^000000";
		mes "^FF0000" + .@inputstr$ + "!^000000";
		mes "^FF0000" + .@inputstr$ + "!^000000";
		next;
		mes "[Отец Даян]";
		mes "Э... Да?";
		mes "Паломничество в Святую Землю...";
		mes "Давно я не встречал столь преданного священника.";
		mes "Добро пожаловать, "+(Sex?"брат.":"сестра.");
		next;
		mes "- Старый священник тепло -";
		mes "- улыбается вам. -";
		next;
		mes "[Отец Даян]";
		mes "Погляди на эту деревеньку в окружении бескрайних лесов. Видишь огромное дерево?";
		next;
		mes "[Отец Даян]";
		mes "Оно зовётся ^3131FFИггдрасиль^000000.";
		mes "Оно произошло из тела Имира, когда Один создал наш Мир, Рун-Мидгард.";
		next;
		mes "[Отец Даян]";
		mes "И от корней его берут начало потоки, питающие каждый Мир.";
		next;
		mes "[Отец Даян]";
		mes "Корни его достигают Нифльхейма, где течёт поток Хвергельмир. В Рун-Мидгарде течёт поток Мимира. А в Асгарде, Мире Богов, течёт поток Урд.";
		next;
		mes "[Отец Даян]";
		mes "Поток Мимира есть источник мудрости. Легенда гласит, что Один отдал глаз, чтобы получить знания из этого источника.";
		next;
		mes "[Отец Даян]";
		mes Sex?"Брат.":"Сестра.";
		mes "Священное Паломничество даёт нам возможность приблизиться к праведности, очищая наше тело и душу.";
		next;
		mes "[Отец Даян]";
		mes "Войди в Иггдрасиль. Ты можешь подвергнуться нападению его обитателей, но помни, что они просто защищают Священное Древо.";
		next;
		mes "[Отец Даян]";
		mes "Просто следуй к своей цели. Если Один не покинет тебя, ты сможешь достичь начала Мира у корня Иггдрасиля. Там найди спокойное, тихое место.";
		next;
		mes "[Отец Даян]";
		mes "Вознеси искреннюю молитву о жизни в вере и чистосердечно исповедуйся в грехах.";
		next;
		mes "[Отец Даян]";
		mes "Восславь Божье всезнание и всемогущество и молись о мудрости выбора правильного пути.";
		mes "^3131FFНе стесняйся спрашивать моего совета, как нужно молиться^000000.";
		next;
		mes "[Отец Даян]";
		mes "Иди к местам, которые были свидетелями самых славных событий с участием Одина.";
		next;
		mes "[Отец Даян]";
		mes "А когда завершишь своё паломничество, приглашаю тебя выпить и обсудить твой опыт.";
		next;
		mes "- Улыбка снова озаряет -";
		mes "- лицо отца Даяна. -";
		set job_arch,2;
		changequest 2187,2188;
		close;
	} else if (job_arch == 2) {
		mes "[Отец Даян]";
		mes "Нет места священнее на земле, чем Иггдрасиль.";
		mes "Святое таинство это исцелит твою душу.";
		next;
		switch(select("Как мне следует молиться?:Отмена.")) {
		case 1:
			mes "[Отец Даян]";
			mes "В молитве мы проходим четыре пути. Запомни хорошенько всё, что я сейчас скажу.";
			next;
			mes "[Отец Даян]";
			mes "Первый путь это ^3131FFпуть медитации^000000.";
			mes "На пути медитации мы готовимся приветствовать Одина в ясном сознании.";
			next;
			mes "[Отец Даян]";
			mes "Медитация начинается с ^3131FFБлагословения^000000, успокаивающего ум.";
			next;
			mes "[Отец Даян]";
			mes "Второй путь -- ^3131FFпуть боли^000000.";
			mes "На этом пути мы глубоко задумываемся о своих деяниях и каемся в ошибках, которые совершили.";
			next;
			mes "[Отец Даян]";
			mes "Не бойся боли. Она лишь необходимая часть искупления, первый шаг на пути к исцелению ран.";
			next;
			mes "[Отец Даян]";
			mes "Третий путь есть ^3131FFпуть счастья^000000.";
			mes "Пройдя через боль и сожаление, ум наш закаляется, и страдание уходит. Его место занимает любовь к жизни и радость поддержки и помощи остальным.";
			next;
			mes "[Отец Даян]";
			mes "И они воздадут тебе сторицей и благословят тебя, ибо ты есть средоточие счастья, превосходящего любые невзгоды. Мы называем это ^3131FFАсперсио^000000.";
			mes "Испей ^3131FFсвятой воды^000000 в знак причастия к таинству Асперсии.";
			next;
			mes "[Отец Даян]";
			mes "Последний путь -- ^3131FFпуть света^000000.";
			mes "Ты свобод"+(Sex?"ен":"на")+" от всякого греха, ибо благословл"+(Sex?"ён":"ена")+" всем сущим.";
			next;
			mes "[Отец Даян]";
			mes "В чистом своём перерождении воспой ^3131FFГлорию^000000 и восславь счастье и любящую душу.";
			next;
			mes "[Отец Даян]";
			mes "А после замри в благочестивой тишине.";
			mes "Если твои молитвы были искренни, Один одарит тебя своей мудростью.";
			next;
			mes "[Отец Даян]";
			mes "Готов"+(Sex?"":"а")+" ли ты приступить? Что ж, настало время молитв и искуплений. Когда ты завершишь свою службу, мы поговорим вновь.";
			close;
		case 2:
			mes "[Отец Даян]";
			mes "Надеюсь, мои молитвы облегчат твои страдания...";
			close;
		}
	} else if (job_arch == 3) {
		mes "[Отец Даян]";
		mes "Ох, ты вернул"+(Sex?"ся":"ась")+". Мне кажется, твоё лицо посвежело. Похоже, твои молитвы были искренни.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "У меня стало так легко на душе. Как будто я заново родил"+(Sex?"ся":"ась")+"...";
		next;
		mes "[Отец Даян]";
		mes "Это вера возносит твоё сердце. Одна только улыбка того, кто обрёл мир в своей душе, способна даровать избавление страждущим. Будь же людям вдохновением и светочем.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Спасибо вам за добрые слова.";
		next;
		mes "[Отец Даян]";
		mes Sex?"Брат.":"Сестра. Есть место, где тебе стоит побывать.";
		next;
		mes "[Отец Даян]";
		mes "В Шварцвальте, в деревне Хугель, живёт благодетельная сестра, молящаяся за всех страдающих в Мире. Её зовут Винью. Когда я видел её в последний раз, она показалась мне непривычно печальной.";
		next;
		mes "[Отец Даян]";
		mes "Не мог"+(Sex?"":"ла")+" бы ты сподвигнуть и её на паломничество к Иггдрасилю? Мне кажется, она слишком устала, посвящая столько времени молитвам. Надеюсь, воздух Иггдрасиля исцелит её.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Не беспокойтесь. Я встречусь с ней.";
		next;
		mes "[Отец Даян]";
		mes "Большое спасибо. Когда захочешь помолиться, заходи ко мне. Визиты друзей приносят мне радость.";
		set job_arch,4;
		changequest 2188,2189;
		close;
	}
	mes "[Даян]";
	mes "Удалось ли тебе повидаться с сестрой Винью, "+(Sex?"брат":"сестра")+"? Как она поживает?";
	close;
}

yggdrasil01,220,47,0	script	#arch_pilgrimage	139,5,5,{
OnTouch:
	if (job_arch == 2) {
		mes "[" + strcharinfo(0) + "]";
		mes "Вот и источник Хвергельмир. Такое дикое и мирное место. Подходящее место для молитвы.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Время преклонить колена...";
		mes " ";
		mes "Хмм, что говорил мне отец?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Хмм... Каков первый путь?";
		next;
		switch(select("Путь тишины.:Путь раскаяния.:Путь медитации.")) {
		case 1:
			mes "[" + strcharinfo(0) + "]";
			mes "Путь тишины...?";
			mes "Не думаю.";
			close;
		case 2:
			mes "[" + strcharinfo(0) + "]";
			mes "Путь раскаяния...?";
			mes "Не думаю.";
			close;
		case 3:
			mes "[" + strcharinfo(0) + "]";
			mes "Путь медитации...?";
			mes "Да, это путь медитации.";
			next;
		}
		mes "^3131FF[Отец Даян]^000000";
		mes "^3131FFПервый путь это путь медитации.^000000";
		mes "^3131FFНа пути медитации мы готовимся приветствовать Одина в ясном сознании.^000000";
		next;
		mes "^3131FF[Отец Даян]^000000";
		mes "^3131FFМедитация начинается с Благословения, успокаивающего ум.^000000";
		next;
		mes "- Вы закрываете глаза и -";
		mes "- делаете глубокий вдох. -";
		next;
		mes "- * БЛАГОСЛОВЕНИЕ! * -";
		specialeffect2 EF_BLESSING;
		next;
		mes "Эффект благословения освежил ваш разум. Вы продолжаете медитацию, стараясь освободить сознание от всяких мыслей.";
		next;
		mes "^3131FF[Отец Даян]^000000";
		mes "^3131FFВторой путь это путь боли.^000000";
		mes "^3131FFНа этом пути мы глубоко задумываемся о своих деяниях и каемся в ошибках, которые совершили.^000000";
		next;
		mes "^3131FF[Отец Даян]^000000";
		mes "^3131FFНе бойся боли. Она лишь необходимая часть искупления, первый шаг на пути к исцелению ран.^000000";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Боль... Какие ошибки я совершил"+(Sex?"":"а")+"?";
		input .@inputstr$;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Я каюсь перед Одином.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "^3131FF" + .@inputstr$ + ".^000000";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "О Один великодушный, смилостивись надо мной, ибо я был"+(Sex?"":"а")+" нерадив"+(Sex?"":"а")+" в своём служении. Укажи "+(Sex?"своему глупому":"своей глупой")+" слуге правильный путь.";
		next;
		mes "- Размышления охватывают вас. -";
		next;
		mes ".............................";
		next;
		mes ".............................";
		mes ".........................";
		next;
		mes ".............................";
		mes ".........................";
		mes ".....................";
		next;
		mes "^3131FF[Отец Даян]^000000";
		mes "^3131FFТретий путь есть путь счастья.^000000";
		mes "^3131FFПройдя через боль и сожаление, ум наш закаляется, и страдание уходит. Его место занимает любовь к жизни и радость поддержки и помощи остальным.^000000";
		next;
		mes "^3131FF[Отец Даян]^000000";
		mes "^3131FFИ они воздадут тебе сторицей и благословят тебя, ибо ты есть средоточие счастья, превосходящего любые невзгоды. Мы называем это Асперсио.^000000";
		next;
		mes "^3131FF[Отец Даян]^000000";
		mes "^3131FFИспей святой воды в знак причастности к таинству Асперсии.^000000";
		next;
		if (countitem(523) == 0) {
			mes "[" + strcharinfo(0) + "]";
			mes "О нет! Я забыл"+(Sex?"":"а")+" святую воду!";
			close;
		}
		mes "- Вы бережно берёте сосуд -";
		mes "- со святой водой и подносите -";
		mes "- его к губам. -";
		next;
		mes "- * АСПЕРСИО! * -";
		specialeffect2 EF_ASPERSIO;
		next;
		specialeffect2 EF_RECOVERY;
		mes ".............................";
		next;
		mes ".............................";
		mes ".........................";
		next;
		mes ".............................";
		mes ".........................";
		mes ".....................";
		next;
		mes "^3131FF[Отец Даян]^000000";
		mes "^3131FFПоследний путь это путь света.^000000";
		mes "^3131FFТы свобод"+(Sex?"ен":"на")+" от всякого греха, ибо благословл"+(Sex?"ён":"ена")+" всем сущим.^000000";
		next;
		mes "^3131FF[Отец Даян]^000000";
		mes "^3131FFВ чистом своём перерождении воспой Глорию и восславь счастье и любящую душу.^000000";
		next;
		mes "- Вы делаете полный вдох и -";
		mes "- начинаете петь Глорию. -";
		mes "- Ваш голос сплетается с шумом -";
		mes "- водопада и плеском источника, -";
		mes "- и от такого хора захватывает дух. -";
		specialeffect2 EF_GLORIA;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "~ Под Иггдрасилем-ясенем потомки Хеймдалля собрались. ~";
		mes "~ Мудрость Миров несёт средь ветвей мне орёл златокрылый. ~";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "~ Волк Иггдрасилев защитник мой от бед и печалей. ~";
		specialeffect2 EF_GLORIA;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "~ И в Валаскальфе звучит ликование Мира! Вали-владыка, от трона восстань и подними кубок! ~";
		mes "~ Света отец, поэт и мудрейший, пропой мою душу. ~";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "~ Вещее слово твоё непреложно сверкает. ~";
		specialeffect2 EF_GLORIA;
		next;
		mes "- Когда вы кончаете пение, -";
		mes "- вас переполняет безграничное -";
		mes "- стремление к Богу. -";
		specialeffect2 EF_BLESSING;
		specialeffect2 EF_RESURRECTION;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Просто восхитительно.";
		mes "Похоже, пора возвращаться к отцу Даяну.";
		set job_arch,3;
		close2;
		warp "umbala",138,219;
		end;
	} else if (job_arch == 3) {
		mes "[" + strcharinfo(0) + "]";
		mes "Служба окончена. Нужно вернуться к отцу Даяну.";
		close2;
		warp "umbala",138,219;
		end;
	}
	end;
}

hu_in01,205,204,7	script	Praying Nun#benew	79,{
	if (job_arch == 4) {
		mes "- Глаза этой сестры прикрыты, и -";
		mes "- она шепчет что-то, -";
		mes "- напоминающее молитву. -";
		next;
		if(select("Заговорить с ней.:Промолчать.") == 2) {
			mes "- Вы решили не мешать ей. -";
			close;
		}
		mes "[" + strcharinfo(0) + "]";
		mes "Кхм, здравствуй, сестра?";
		next;
		mes "[Винью]";
		mes "Ах, приветствую, "+(Sex?"брат":"сестра")+". Ещё не время службы... Ты здесь, чтобы помолиться?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Я приш"+(Sex?"ёл":"ла")+" передать привет от отца Даяна из Пронтеры.";
		next;
		mes "[Винью]";
		mes "Ах, отец Даян. Как он поживает? Он такой милый, хотя уже и совсем старенький.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Он рассказал, что его обеспокоил твой усталый вид, когда вы виделись в последний раз. Он просил тебя отправиться совершить Священное Паломничество.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "В Умбале действительно жизнь бьёт ключом!";
		next;
		mes "[Винью]";
		mes "Ах...";
		mes "Он очень добр. И ты тоже, "+(Sex?"брат":"сестра")+".";
		next;
		mes "[Винью]";
		mes "Но не беспокойся. Я просто немного не выспалась из-за плохих снов.";
		next;
		mes "[Винью]";
		mes "Зло всегда сторожит наши души и ни за что не упустит своего шанса, если мы недостаточно усердны в молитвах.";
		next;
		if(select("Плохие сны?:Ты весьма усердна.") == 2) {
			mes "[Винью]";
			mes "Недостаточно, этого недостаточно. Моя душа на грани. Спасибо за весть. Я пойду молиться дальше.";
			close;
		}
		mes "[Винью]";
		mes "Ну...";
		mes "У меня начались кошмары с самого дня моего назначения.";
		next;
		mes "[Винью]";
		mes "Сначала мне снилась Валькирия, печальная, во тьме.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Валькирия?";
		next;
		mes "[Винью]";
		mes "Да...";
		mes "Она плакала в комнате, в которой совсем небыло света. Она была похожа на птицу, которой подрезали крылья.";
		next;
		mes "[Винью]";
		mes "Но со временем этот сон становился всё более страшным. Сейчас Валькирия закована в цепи и в конце концов её образ разбивается вдребезги.";
		next;
		mes "[Винью]";
		mes "Это так... ужасно! У меня захватывает дух, и я просыпаюсь.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Видеть смерть Валькирии, должно быть, нестерпимо.";
		next;
		mes "[Винью]";
		mes "Кошмар ли это? Или это знамение?";
		next;
		mes "[Винью]";
		mes "Я хотела вознести молитву в святилище Одина, может, тогда этот кошмар уйдёт. Но оно давно уже стало пристанищем зла.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Святилище Одина? И никто не пытался его очистить?";
		next;
		mes "[Винью]";
		mes "К несчастью, я простая сестра и не умею изгонять нежить...";
		mes "Да и остальные хугельские священники далеки от походов и приключений и до сих пор остаются в стороне от этого дела.";
		next;
		mes "[Винью]";
		mes "Сейчас идёт разведка Святилища и там работают многие хорошие люди, но ситуация далека от идеала.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Ты думаешь, кошмар как-то связан со злом в Святилище?";
		next;
		mes "[Винью]";
		mes "Ну... Хм.";
		mes "Не знаю. Я понятия не имею, как это можно было бы выяснить. Мне остаётся только молиться.";
		next;
		if(select("Я выясню это.:Я помолюсь с тобой.") == 2) {
			mes "[Винью]";
			mes "Спасибо тебе, "+(Sex?"брат":"сестра")+".";
			mes "Я молюсь о том, чтобы тьма ушла. Надеюсь, тебе удастся отдохнуть в Хугеле.";
			close;
		}
		mes "[Винью]";
		mes "Да?";
		mes "Но там так страшно! Там столько демонов!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Но я же не могу остаться в стороне, когда сестра в беде?";
		mes "Я Священник, и мне приходилось иметь дело и с аскетизмом, и с чудовищами. Доверься мне.";
		next;
		mes "[Винью]";
		mes "Ах... я уже за тебя беспокоюсь. Большое тебе спасибо. Я никогда не забуду твою доброту.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Как мне попасть в Святилище Одина?";
		next;
		mes "[Винью]";
		mes "Моряк у причала прямо перед церковью туда ходит.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Хорошо. Жди новостей!";
		next;
		mes "[Винью]";
		mes "Я буду молиться о твоём успехе.";
		mes "Надеюсь, Один защитит тебя.";
		set job_arch,5;
		changequest 2189,2190;
		close;
	} else if ((job_arch > 4) && (job_arch < 100)) {
		mes "[Винью]";
		mes "Я буду молиться о твоём благополучном возвращении.";
		close;
	}
	mes "[Винью]";
	mes "Мне стало легче дышать. Наверное, это хорошая новость?";
	close;
}

odin_tem02,282,263,0	script	#find_val	139,3,3,{
OnTouch:
	if ((job_arch > 4) && (job_arch < 100))
		hideoffnpc "Valkyrie Illusion#arch";
	end;
}

odin_tem02,281,275,3	script	Valkyrie Illusion#arch	403,{
	if ((job_arch > 4) && (job_arch < 100)) {
		mes "- Вы видите Валькирию, -";
		mes "- на лице её выражение -";
		mes "- безнадёжности. -";
		next;
		switch(select("Прикоснуться.:Уйти.")) {
		case 1:
			mes "- Приблизившись к образу -";
			mes "- Валькирии, вы теряете -";
			mes "- сознание... -";
			close2;
			specialeffect2 EF_CLOAKING;
			warp "job3_arch01",29,29;
			hideonnpc "Valkyrie Illusion#arch";
			end;
		case 2:
			mes "- Вне себя от страха, вы -";
			mes "- пятитесь назад... -";
			close2;
			hideonnpc "Valkyrie Illusion#arch";
			end;
		}
	}
	end;
OnInit:
	hideonnpc "Valkyrie Illusion#arch";
	end;
}

job3_arch01,29,34,3	script	Valkyrie#arch	403,{
	if (checkweight(1201,1) == 0 || (MaxWeight - Weight) < 2000) {
		mes "- Стоп !! -";
		mes "- У вас с собой слишком много -";
		mes "- вещей и не поместятся новые. -";
		mes "- Что-то придётся выложить, -";
		mes "- чтобы пройти испытание. -";
		close;
	}
	if ((BaseLevel != 99) || (JobLevel < 50) || (BaseJob != Job_Priest)) {
		warp "odin_tem02",282,263;
		end;
	}
	if (getmercinfo(1)) {
		mes "[Валькирия]";
		mes "Я буду говорить с тобой ^3131FFнаедине^000000, без наёмников и помощников.";
		close;
	}
	if (SkillPoint) {
		mes "У тебя остались свободные очки умений. Пожалуйста, используй их~";
		close;
	}
	if (Class != Job_Priest && Class != Job_High_Priest && Class != Job_Baby_Priest) {
		warp "odin_tem02",282,263;
		end;
	} else if (Class != Job_Arch_Bishop && Class != Job_Arch_Bishop_T && Class != Job_Baby_Bishop) {
		if (job_arch < 5) {
			warp "odin_tem02",282,263;
			end;
		} else if (job_arch == 5) {
			mes "[Валькирия]";
			mes "Небесные трубы поют, и зов их пронизывает просторы. Но птица, сломавшая крылья, с воплем падает вниз -- и наконец разбивается в прах.";
			mes "О, горе мне! О, горе!";
			next;
			mes "- Валькирия прячет лицо в -";
			mes "- ладонях, но замечает вас, и -";
			mes "- взгляд её становится полон -";
			mes "- угрозы. -";
			next;
			mes "[Валькирия]";
			mes "Ты потомок Хеймдалля, живущий смертной судьбой, что ты здесь делаешь? Приш"+(Sex?"ёл":"ла")+" посмеяться над моим несчастьем?";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "Отнюдь. Но в том, что я здесь из-за тебя, есть доля правды.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "...из-за меня?";
			mes "Да, мы случайно оказались в одном Мире, Мидгарде, но это не значит, что наши судьбы теперь связаны.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Может, ты ищешь пути в Вальхаллу? Если так, ты выбрал"+(Sex?"":"а")+" не то место.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Меня изгнали из Асгарда. Моя обязанность была защищать этот островок от людей, которые пытаются отобрать его у Богов, но даже на это у меня сил не хватает.";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "Мне не нужно в Вальхаллу. Но есть кое-кто, кто смог почувствовать твоё болезненное положение.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Хаха! Ты, что, собираешься помогать мне?!";
			next;
			mes "[Валькирия Ангхильда]";
			mes "...................";
			next;
			mes "- Валькирия бросает на вас -";
			mes "- сердитый взгляд. -";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Сейчас я ничего не могу сделать сама.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Отвечай, человек. Будешь ли ты помогать мне?";
			next;
			if(select("Да:Нет") == 2) {
				mes "[Валькирия Ангхильда]";
				mes "Я знала, что людям нельзя доверять!";
				close2;
				warp "odin_tem02",282,263;
				end;
			}
			mes "[Валькирия Ангхильда]";
			mes "Ладно...";
			mes "Моих собственных сил ни на что не хватает, так что выбора у меня нет.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Я была обычной Валькирией, ведущей павших воинов в Вальхаллу по завету Одина.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Но потом я повредила Фреки, одного из волков Одина, и меня сослали из Асгарда на этот остров, защищать его.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Этот остров так важен, храм здесь посвящён не только Одину, но и многим другим Богам. Я старалась, как могла, его оберегать.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Но однажды сюда проникло демоническое влияние. Я не знаю, откуда оно пришло и почему.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Прислужники зла осадили остров, и я потратила все свои силы в попытках защитить его.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Святилище захвачено демонами! О, как долго мне ещё страдать от этой злой судьбы!";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Как твоё имя, смертный?";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "Меня зовут " + strcharinfo(0) + ".";
			next;
			mes "[Валькирия Ангхильда]";
			mes "" + strcharinfo(0) + ",";
			mes "ты говоришь, что готов"+(Sex?"":"а")+" мне помочь. Хоть это и позорно для меня, я прошу твоей помощи.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Может показаться, что это место создано людьми. Так или иначе, это важный памятник божественной истории.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "У меня нет сил, а тело моё сковано, поэтому я не могу должным образом защитить это место. Тебе нужно послать весть в Вальхаллу и просить о помощи Валькирий.";
			next;
			select("Как мне это сделать?");
			mes "[Валькирия Ангхильда]";
			mes "Ты сможешь связаться с ними с помощью ^3131FFзолотого рога^000000 в ^3131FFвысшей точке святилища^000000.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Я снабжу тебя свитком на древнем языке. Там -- моё воплощение.";
			mes "^3131FFКогда выйдешь отсюда, ты сможешь призвать Валькирию.^000000";
			next;
			mes "[Валькирия Ангхильда]";
			mes "После того, как моё воплощение будет с тобой, найди ^3131FFосколок рога^000000.";
			mes "Скорее всего, они разбросаны по всему святилищу...";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Собери осколки рога и взойди на высшее место святилища, а я позабочусь об остальном.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Воплощение будет помогать тебе и слушаться твоих приказов через ^FF0000ALT+клик^000000. Но будь осторож"+(Sex?"ен":"на")+", если твой помощник падёт.";
			next;
			mes "[Валькирия Ангхильда]";
			mes "Обратись ко мне, когда закончишь все приготовления. Это будет неблизкий путь...";
			set job_arch,6;
			close;
		} else if (job_arch == 6) {
			if ($@archbs == 0) {
				set $@archbs,1;
				mes "[Валькирия Ангхильда]";
				mes "" + strcharinfo(0) + ", завершил"+(Sex?"":"а")+" ли ты приготовления к своему восхождению?";
				next;
				if (getmapusers("job3_arch02") > 0) {
					mes "[Валькирия Ангхильда]";
					mes "Хмм, кто-то уже сражается со злом в святилище. Сейчас я узнаю, кто это.";
					set $@archbs,0;
					close;
				}
				mes "[Валькирия Ангхильда]";
				mes "Хорошо. Сейчас я отправлю тебя на место.";
				mes "^FF0000По прибытии не забудь высвободить моё воплощение.^000000";
				set $@archbs,0;
				close2;
				nude;
				if (countitem(2798))
					delitem 2798,countitem(2798); //Will_Of_Exhausted_Angel
				donpcevent "start#arch::OnEnable";
				set job_arch,7;
				changequest 2190,2191;
				warp "job3_arch02",119,49;
				hideonnpc "Valkyrie#arch";
				end;
			}
			mes "[Валькирия Ангхильда]";
			mes "Минутку, мне нужно закончить другой разговор.";
			close;
		} else if (job_arch == 7) {
			if (countitem(12381)) delitem 12381,countitem(12381); //ValkyrieA_Scroll
			if (countitem(12382)) delitem 12382,countitem(12382); //ValkyrieB_Scroll
			if ($@archbs == 0) {
				set $@archbs,1;
				mes "[Валькирия Ангхильда]";
				mes "Ты в порядке, смертн"+(Sex?"ый":"ая")+"?";
				mes "Оказывается, не так уж это и просто. Готов"+(Sex?"":"а")+" ли ты попытаться ещё?";
				next;
				if (getmapusers("job3_arch02") > 0) {
					set $@archbs,0;
					mes "[Валькирия Ангхильда]";
					mes "Кто-то в данный момент, похоже, уже сражается с дьявольскими силами. Подожди здесь, а я выясню, кто бы это мог быть.";
					close;
				}
				set $@archbs,0;
				mes "[Валькирия Ангхильда]";
				mes "Отлично, теперь я отправлю тебя туда.";
				mes "^FF0000Не забудь высвободить моё воплощение.^000000";
				mes "Оно поможет тебе в бою, направлять его ты сможешь, зажав клавишу ^FF0000ALT^000000 и кликая на землю или цель. Но берегись, если воплощение падёт.";
				close2;
				nude;
				if (countitem(2798))
					delitem 2798,countitem(2798); //Will_Of_Exhausted_Angel
				donpcevent "start#arch::OnEnable";
				set job_arch,7;
				warp "job3_arch02",119,49;
				hideonnpc "Valkyrie#arch";
				end;
			}
			mes "[Валькирия Ангхильда]";
			mes "Минутку, мне нужно закончить другой разговор.";
			close;
		}
	}
	end;
OnBc:
	set $@archbs,0;
	mapannounce "job3_arch01","Валькирия: Похоже, в святилище кто-то пробрался. Я слышу оттуда злорадный смех.",bc_map,"0xFFCE00";
	hideoffnpc "Valkyrie#arch";
	end;
}

job3_arch02,119,49,0	script	#arch_1_start	139,6,6,{
OnTouch:
	if (countitem(12381) == 0)
		getitem 12381,1; //ValkyrieA_Scroll
	mapannounce "job3_arch02","Шёпот воплощения: Тяжко мне! Свободы!",bc_map,"0xFFCE00";
	disablenpc "#arch_1_start";
	end;
}

-	script	#arch_1_01_0::archbjcq	-1,{
OnTouch:
	if (countitem(12381)) {
		delitem 12381,1; //ValkyrieA_Scroll
		// fall through
	} else if (getmercinfo(1) == 2037) {
		if (strnpcinfo(0) == "#arch_1_10")
			viewpoint 1,113,327,1,0xFF9900;
		set .@randht, rand(1,10);
		if (.@randht < 8)
			mapannounce "job3_arch02","Шёпот воплощения: Чую демонов дух! Осторожнее!",bc_map,"0xFFCE00";
		else if ((.@randht == 8) || (.@randht == 9))
			mapannounce "job3_arch02","Шёпот воплощения: Идут!",bc_map,"0xFFCE00";
		end;
	}
	mapannounce "job3_arch02","Шёпот воплощения: Ты не справишься в одиночку! Возвращаемся!",bc_map,"0xFFCE00";
	mapwarp "job3_arch02","job3_arch01",29,29;
	end;
}
job3_arch02,112,73,0	duplicate(archbjcq)	#arch_1_01	139,5,5
job3_arch02,94,123,0	duplicate(archbjcq)	#arch_1_02	139,5,5
job3_arch02,93,173,0	duplicate(archbjcq)	#arch_1_03	139,5,5
job3_arch02,114,186,0	duplicate(archbjcq)	#arch_1_04	139,5,5
job3_arch02,134,201,0	duplicate(archbjcq)	#arch_1_05	139,5,5
job3_arch02,154,211,0	duplicate(archbjcq)	#arch_1_06	139,5,5
job3_arch02,175,227,0	duplicate(archbjcq)	#arch_1_07	139,5,5
job3_arch02,201,240,0	duplicate(archbjcq)	#arch_1_08	139,5,5
job3_arch02,223,252,0	duplicate(archbjcq)	#arch_1_09	139,5,5
job3_arch02,255,268,0	duplicate(archbjcq)	#arch_1_10	139,5,5
job3_arch02,269,302,0	duplicate(archbjcq)	#arch_1_11	139,5,5
job3_arch02,245,289,0	duplicate(archbjcq)	#arch_1_12	139,5,5

job3_arch02,203,286,0	script	#arch_1_boss	139,5,5,{
OnTouch:
	if (countitem(12381)) {
		delitem 12381,1; //ValkyrieA_Scroll
		// fall through
	} else if (getmercinfo(1) == 2037) {
		mapannounce "job3_arch02","Ужас Валькирии: Иллюзия некомпетентной валькирии с людской помощью едва добралась сюда! Хочешь кошмара?",bc_map,"0xFF0000";
		donpcevent "mob#arch_1::OnKill";
		end;
	}
	mapannounce "job3_arch02","Шёпот воплощения: Тебе не справиться одно"+(Sex?"му":"й")+"! Отступаем!",bc_map,"0xFFCE00";
	mapwarp "job3_arch02","job3_arch01",29,29;
	end;
}

-	script	#arch_redcell	-1,{
OnInit:
	setcell "job3_arch02",276,290,280,294,cell_walkable,0;
	setcell "job3_arch02",276,290,280,294,cell_shootable,0;
	end;
OnGreen:
	setcell "job3_arch02",276,290,280,294,cell_walkable,1;
	setcell "job3_arch02",276,290,280,294,cell_shootable,1;
	end;
OnRed:
	setcell "job3_arch02",276,290,280,294,cell_walkable,0;
	setcell "job3_arch02",276,290,280,294,cell_shootable,0;
	end;
}

job3_arch02,390,389,1	script	#arch_val01	844,{
	end;
OnEnable:
	areamonster "job3_arch02",111,325,115,329,"Ужас Валькирии",2036,1,"#arch_val01::OnMyMobDead";
	end;
OnMyMobDead:
	if (mobcount("job3_arch02","#arch_val01::OnMyMobDead") < 1) {
		donpcevent "#arch_redcell::OnGreen";
		mapannounce "job3_arch02","Ужас Валькирии: Твоя победа -- просто иллюзия! Ха-ха-ха-ха!",bc_map,"0xFF0000";
		hideoffnpc "Valkyrie#arch_01";
		disablenpc "#arch_1_start";
		disablenpc "#arch_1_01";
		disablenpc "#arch_1_02";
		disablenpc "#arch_1_03";
		disablenpc "#arch_1_04";
		disablenpc "#arch_1_05";
		disablenpc "#arch_1_06";
		disablenpc "#arch_1_07";
		disablenpc "#arch_1_08";
		disablenpc "#arch_1_09";
		disablenpc "#arch_1_10";
		disablenpc "#arch_1_11";
		disablenpc "#arch_1_12";
		disablenpc "#arch_1_boss";
	}
	end;
OnKill:
	killmonster "job3_arch02","#arch_val01::OnMyMobDead";
	end;
}

job3_arch02,390,387,1	script	#arch_val02	844,{
	end;
OnEnable:
	areamonster "job3_arch02",242,44,246,48,"Ужас Валькирии",2036,1,"#arch_val02::OnMyMobDead";
	end;
OnMyMobDead:
	if (mobcount("job3_arch02","#arch_val02::OnMyMobDead") < 1) {
		mapannounce "job3_arch02","Ужас Валькирии: Вот мелюзга. Иди поиграй с демонами. Я уж постараюсь, чтоб ты не заскучал"+(Sex?"":"а")+"!",bc_map,"0xFF0000";
		hideoffnpc "Valkyrie#arch_02";
		disablenpc "#arch_2_boss";
		viewpoint 1,279,234,1,0xFFFF99;
	}
	end;
OnKill:
	killmonster "job3_arch02","#arch_val02::OnMyMobDead";
	end;
}

job3_arch02,113,327,5	script	Valkyrie#arch_01	403,{
	if (getmercinfo(1)) {
		mes "[Валькирия]";
		mes "Если хочешь говорить со мной, ^3131FFосвободись от всех помощников.^000000";
		close;
	}
	mes "[Валькирия Ангхильда]";
	mes "Дьявол не упускает случая подчинить человеческую волю. Но не обращай внимания на его шёпот.";
	next;
	mes "[Валькирия Ангхильда]";
	mes "Я чувствую, как энергия возвращается ко мне. Покажи, что тебе удалось отыскать.";
	next;
	mes "- Вы показываете осколок -";
	mes "- золотого рога. -";
	next;
	mes "[Валькирия Ангхильда]";
	mes "О, это же осколок рога! Если собрать рог, можно призвать в помощь других валькирий.";
	next;
	mes "[Валькирия Ангхильда]";
	mes "Из-за близкого сражения мне удалось восстановить лишь немного энергии. Я дам тебе ^3131FFещё один свиток^000000. Это поможет найти остальные осколки.";
	next;
	mes "[Валькирия Ангхильда]";
	mes "Жду тебя вновь с добрыми вестями.";
	close2;
	getitem 12382,1; //ValkyrieB_Scroll
	viewpoint 1,244,46,1,0xFFFF99;
	hideonnpc "Valkyrie#arch_01";
	donpcevent "#arch_2_start::OnEnable";
	end;
}

job3_arch02,244,46,5	script	Valkyrie#arch_02	403,{
	mes "[Валькирия Ангхильда]";
	mes "Тебе удалось найти остальные осколки?";
	next;
	if (countitem(6154) < 2) {
		mes "[Валькирия Ангхильда]";
		mes "Хм?";
		mes "Смотри, ещё один у тебя за спиной.";
		getitem 6154,2; //Broken_Horn_Pipe
		next;
	}
	mes "[Валькирия Ангхильда]";
	mes "Отлично.";
	mes "Теперь я восстановлю рог!";
	next;
	mes "[Валькирия Ангхильда]";
	mes "Однако битва ещё не закончена. Помнишь ^3131FFразрушенное святилище в центре острова^000000? Конец наступит только тогда, когда ты протрубишь в золотой рог на этом месте.";
	next;
	mes "[Валькирия Ангхильда]";
	mes "Вокруг становится всё более нечисто, всюду проникает холод непроглядной тьмы. Становится опасно.";
	next;
	mes "[Валькирия Ангхильда]";
	mes "Я дарю тебе это ожерелье. Правда, не знаю, поможет ли оно...";
	mes "Береги себя.";
	mes "Поспеши же!";
	close2;
	getitem 2798,1; //Will_Of_Exhausted_Angel
	hideonnpc "Valkyrie#arch_02";
	donpcevent "#arch_3_start::OnEnable";
	end;
}

job3_arch02,279,234,0	script	#arch_end	139,7,7,{
	end;
OnTouch:
	donpcevent "#arch_3_01::OnKill";
	donpcevent "#arch_3_02::OnKill";
	donpcevent "#arch_3_03::OnKill";
	donpcevent "mob#arch_2::OnKill";
	hideoffnpc "Valkyrie Anguhilde#end";
	if (checkweight(1201,1) == 0 || (MaxWeight - Weight) < 2000) {
		mes "- Минуточку!! -";
		mes "- Вы несёте слишком много вещей. -";
		mes "- Избавьтесь от чего-нибудь. -";
		close;
	}
	if (ismounting()) {
		mes "- Вы не сможете получить -";
		mes "- профессию, не спешившись. -";
		mes "- Уберите ездовое животное. -";
		close;
	}
	if (countitem(6154) < 2) {
		mes "[Валькирия Ангхильда]";
		mes "Удалось ли тее найти все осколки моего рога?";
		next;
		mes "[Валькирия Ангхильда]";
		mes "Я знаю, ты многое перен"+(Sex?"ёс":"есла")+", помогая мне, но я ничего не смогу восстановить, не имея хотя бы пары кусочков.";
		next;
		mes "[Валькирия Ангхильда]";
		mes "Тут опасно, вернёмся.";
		close2;
		nude;
		if (countitem(2798))
			delitem 2798,(2798); //Will_Of_Exhausted_Angel
		delitem 6154,countitem(6154); //Broken_Horn_Pipe
		mapwarp "job3_arch02","job3_arch01",29,29;
		end;
	}
	mes "[Валькирия Ангхильда]";
	mes "Наконец мы завершили подготовку.";
	next;
	mes "- Валькирия поднимает рог. -";
	next;
	mes "Буууууу - - - -";
	next;
	mes "Буууууу - - -";
	next;
	hideoffnpc "Valkyrie of the heavens";
	mes "[Валькирия Ангхильда]";
	mes "Одина дружина! Воины Вальхаллы!";
	mes "Святилище Одина тьма пожирает!";
	next;
	mes "[Небесная валькирия]";
	mes "Пусть твоё сердце будет спокойно, Ангхильда. Глас твой достиг Вальхаллы. Как ты просила, валькирии изгнали демонов.";
	next;
	mes "[Валькирия Ангхильда]";
	mes "Валькирия! Храм теперь освобождён?";
	next;
	mes "[Небесная валькирия]";
	mes "Да, Ангхильда.";
	mes "И, несмотря на твоё изгнание, Один провозгласил пересмотр твоего положения.";
	next;
	mes "[Валькирия Ангхильда]";
	mes "Ах! Я смогу вернуться в Асгард!";
	next;
	mes "[Небесная валькирия]";
	mes "Не спеши с выводами. Но тебе, без сомнения, предстоит испытать добрую волю Одина.";
	next;
	mes "[Валькирия Ангхильда]";
	mes "Слава Одину!";
	mes "Благодарность переполняет меня. Так светло и тепло....";
	next;
	mes "- Шшшшш -";
	specialeffect EF_CLOAKING,AREA,"Valkyrie Anguhilde#end";
	hideonnpc "Valkyrie Anguhilde#end";
	emotion e_omg,1;
	next;
	mes "[Небесная валькирия]";
	mes "Не принимай произошедшее слишком близко к сердцу. Она ушла туда, где и должна быть.";
	next;
	mes "[Небесная валькирия]";
	mes "Похоже, ты не совсем понял"+(Sex?"":"а")+".";
	next;
	mes "[Небесная валькирия]";
	mes "Валькирия Ангхильда давным-давно мертва. Ты видел"+(Sex?"":"а")+" святилище, захваченное демонами. К сожалению, Ангхильда не справилась с заданием и пала.";
	next;
	mes "[Небесная валькирия]";
	mes "Тогда из её страха быть узнанной здесь проявилась иллюзия Ангхильды.";
	mes "Даже в смерти ад закрыт для неё, вот она и застряла посреди своего кошмара.";
	next;
	mes "[Небесная валькирия]";
	mes "Но благодаря твоим усилиям она наконец-то обрела освобождение. Да, её теперешнее состояние не является возвращением в реальность, но у неё появился шанс обрести покой.";
	next;
	mes "[Небесная валькирия]";
	mes "Человек. Валькирии в долгу перед тобой. Мы не можем пригласить тебя, как бы нам того ни хотелось. Но Один даст тебе силы, которые станут подмогой на твоём пути.";
	next;
	mes "[Небесная валькирия]";
	mes "А теперь возвращайся в свой мир. Следуй за голосом золотого рога и пением птиц. Сегодня они поют в твою честь.";
	next;
	if (SkillPoint) {
		mes "Вы не можете продолжать, пока не распределите все свободные очки умений~";
		close;
	}
	mes "[Небесная валькирия]";
	mes "Всегда сохраняй добрую волю и ту любовь к ближним, которые проявил"+(Sex?"":"а")+" сегодня.";
	mes "Надеюсь, однажды мы увидимся снова -- в Вальхалле.";
	nude;
	if (countitem(2798))
		delitem 2798,countitem(2798); //Will_Of_Exhausted_Angel
	delitem 6154,countitem(6154); //Broken_Horn_Pipe
	set job_arch,100;
	completequest 2191;
	getitem 5747,1; //Mitra
	getitem 2795,1; //Green_Apple_Ring
	jobchange roclass(eaclass()|EAJL_THIRD);
	close;
OnInit:
	disablenpc "#arch_end";
	end;
}

job3_arch02,281,232,1	script	Valkyrie Anguhilde#end	403,{
	end;
OnInit:
	hideonnpc "Valkyrie Anguhilde#end";
	end;
}

job3_arch02,273,235,5	script	Valkyrie of the heavens	811,{
	if (job_arch == 100) {
		mes "[Небесная валькирия]";
		mes "А теперь возвращайся в свой мир. Следуй за голосом золотого рога и пением птиц. Сегодня они поют в твою честь.";
		next;
		mes "[Небесная валькирия]";
		mes "Всегда сохраняй добрую волю и ту любовь к ближним, которые проявил"+(Sex?"":"а")+" сегодня.";
		mes "Надеюсь, однажды мы увидимся снова -- в Вальхалле.";
		close2;
		mapwarp "job3_arch02","job3_arch01",29,29;
		end;
	}
	end;
OnInit:
	hideonnpc "Valkyrie of the heavens";
	end;
}

job3_arch02,132,323,0	script	#arch_2_01	139,5,5,{
	end;
OnTouch:
	if (countitem(12382))
		mapannounce "job3_arch02","Шёпот воплощения: я вижу новый свиток!",bc_map;
	end;
}

-	script	#arch_2_02_0::archbjcq2	-1,{
OnTouch:
	if (countitem(12382)) {
		delitem 12382,1; //ValkyrieB_Scroll
		// fall through
	} else if (getmercinfo(1) == 2038) {
		set .@randht, rand(1,10);
		if (.@randht < 8)
			mapannounce "job3_arch02","Шёпот воплощения: Чувствую демонов дух. Слышишь?.. Они собираются, собираются, нет им конца.",bc_map,"0xFFCE00";
		else if ((.@randht == 8) || (.@randht == 9))
			mapannounce "job3_arch02","Шёпот воплощения: Боевая готовность!",bc_map,"0xFFCE00";
		else
			mapannounce "job3_arch02","Шёпот воплощения: Я тебя не оставлю. Умри!",bc_map,"0xFFCE00";
		end;
	}
	mapannounce "job3_arch02","Шёпот воплощения: В одиночку ты не справишься! Отступаем!",bc_map,"0xFFCE00";
	mapwarp "job3_arch02","job3_arch01",29,29;
	end;
}
job3_arch02,167,313,0	duplicate(archbjcq2)	#arch_2_02	139,5,5
job3_arch02,127,304,0	duplicate(archbjcq2)	#arch_2_03	139,5,5
job3_arch02,207,279,0	duplicate(archbjcq2)	#arch_2_04	139,5,5
job3_arch02,239,281,0	duplicate(archbjcq2)	#arch_2_05	139,5,5
job3_arch02,269,303,0	duplicate(archbjcq2)	#arch_2_06	139,5,5
job3_arch02,288,283,0	duplicate(archbjcq2)	#arch_2_07	139,5,5
job3_arch02,278,234,0	duplicate(archbjcq2)	#arch_2_08	139,5,5
job3_arch02,234,179,0	duplicate(archbjcq2)	#arch_2_09	139,5,5
job3_arch02,227,169,0	duplicate(archbjcq2)	#arch_2_10	139,5,5
job3_arch02,190,146,0	duplicate(archbjcq2)	#arch_2_11	139,5,5

/*
// Not in official script.
job3_arch02,252,267,0	script	#arch_2_12	139,5,5,{
OnTouch:
	mapannounce "job3_arch02","Шёпот воплощения: Это перекрёсток. Пойдём налево. Нужно найти мой рог.",bc_map,"0xFFCE00";
	end;
}

job3_arch02,250,290,0	script	#arch_2_13	139,5,5,{
OnTouch:
	mapannounce "job3_arch02","Шёпот воплощения: Похоже на остатки святилища. Давай здесь отдохнём.",bc_map,"0xFFCE00";
	end;
}
*/

job3_arch02,206,113,0	script	#arch_2_boss	139,5,5,{
OnTouch:
	if (countitem(12382)) {
		delitem 12382,1; //ValkyrieB_Scroll
		// fall through
	} else if (getmercinfo(1) == 2038) {
		mapannounce "job3_arch02","Крик демона: Ты просто дитя. Поиграй с нами, демонами. Уж не заскучаешь!",bc_map,"0xFF0000";
		end;
	}
	mapannounce "job3_arch02","Шёпот воплощения: Ты не сможешь ничего сделать од"+(Sex?"ин":"на")+"! Возвращаемся!",bc_map,"0xFFCE00";
	mapwarp "job3_arch02","job3_arch01",29,29;
	end;
}

job3_arch02,284,159,0	script	#arch_3_01	139,20,20,{
OnTouch:
	if (Class != Job_Priest) {
		mapannounce "job3_arch02","Фрус: Ты хотел"+(Sex?"":"а")+" видеть бога? Я собственными руками отправлю тебя в земли мертвецов!",bc_map,"0xFF0000";
		areamonster "job3_arch02",242,44,246,48,"Frus",1762,1,"#arch_3_01::OnMyMobDead";
	}
	disablenpc "#arch_3_01";
	end;
OnMyMobDead:
	end;
OnKill:
	killmonster "job3_arch02","#arch_3_01::OnMyMobDead";
	end;
//OnInit:
//	enablenpc "#arch_3_01";
//	end;
}

job3_arch02,307,200,0	script	#arch_3_02	139,5,5,{
OnTouch:
	if (BaseJob == Job_Priest) {
		mapannounce "job3_arch02","Скёггуль: Ты мой гость!",bc_map,"0xFF0000";
		monster "job3_arch02",307,200,"Skogul",1761,1,"#arch_3_02::OnMyMobDead";
	}
	disablenpc "#arch_3_02";
	end;
OnMyMobDead:
	end;
OnKill:
	killmonster "job3_arch02","#arch_3_02::OnMyMobDead";
	end;
//OnInit:
//	enablenpc "#arch_3_02";
//	end;
}

job3_arch02,296,216,0	script	#arch_3_03	139,5,5,{
OnTouch:
	mapannounce "job3_arch02","Фрус: Мне нравится твоё лицо... Одолжишь?",bc_map,"0xFF0000";
	monster "job3_arch02",296,216,"Frus",1762,1,"#arch_3_03::OnMyMobDead";
	disablenpc "#arch_3_03";
	end;
OnMyMobDead:
	end;
OnKill:
	killmonster "job3_arch02","#arch_3_03::OnMyMobDead";
	end;
OnInit:
	disablenpc "#arch_3_03";
	end;
}

job3_arch02,389,390,1	script	mob#arch_1	844,{
	end;
OnEnable:
	monster "job3_arch02",100,102,"Захватчик",1394,2,"mob#arch_1::OnMyMobDead";
	monster "job3_arch02",90,131,"Захватчик",1394,2,"mob#arch_1::OnMyMobDead";
	monster "job3_arch02",91,170,"Захватчик",1427,1,"mob#arch_1::OnMyMobDead";
	monster "job3_arch02",104,183,"Захватчик",1427,1,"mob#arch_1::OnMyMobDead";
	monster "job3_arch02",138,205,"Захватчик",1394,2,"mob#arch_1::OnMyMobDead";
	monster "job3_arch02",161,215,"Захватчик",1394,2,"mob#arch_1::OnMyMobDead";
	monster "job3_arch02",165,215,"Захватчик",1427,1,"mob#arch_1::OnMyMobDead";
	monster "job3_arch02",201,236,"Захватчик",1394,2,"mob#arch_1::OnMyMobDead";
	monster "job3_arch02",218,250,"Захватчик",1427,1,"mob#arch_1::OnMyMobDead";
	monster "job3_arch02",254,293,"Захватчик",1427,1,"mob#arch_1::OnMyMobDead";
	end;
OnMyMobDead:
	end;
OnKill:
	killmonster "job3_arch02","mob#arch_1::OnMyMobDead";
	end;
}

job3_arch02,389,389,1	script	mob#arch_2	844,{
	end;
OnEnable:
	monster "job3_arch02",156,321,"Захватчик",1480,2,"mob#arch_2::OnMyMobDead";
	monster "job3_arch02",170,305,"Захватчик",1480,2,"mob#arch_2::OnMyMobDead";
	monster "job3_arch02",183,293,"Захватчик",1453,1,"mob#arch_2::OnMyMobDead";
	monster "job3_arch02",200,287,"Захватчик",1453,1,"mob#arch_2::OnMyMobDead";
	monster "job3_arch02",256,293,"Захватчик",1480,2,"mob#arch_2::OnMyMobDead";
	monster "job3_arch02",286,284,"Захватчик",1480,2,"mob#arch_2::OnMyMobDead";
	monster "job3_arch02",278,236,"Захватчик",1453,1,"mob#arch_2::OnMyMobDead";
	monster "job3_arch02",292,185,"Захватчик",1480,2,"mob#arch_2::OnMyMobDead";
	monster "job3_arch02",281,170,"Захватчик",1453,1,"mob#arch_2::OnMyMobDead";
	monster "job3_arch02",227,166,"Захватчик",1453,1,"mob#arch_2::OnMyMobDead";
	monster "job3_arch02",190,146,"Захватчик",1480,1,"mob#arch_2::OnMyMobDead";
	monster "job3_arch02",204,177,"Захватчик",1453,1,"mob#arch_2::OnMyMobDead";
	end;
OnMyMobDead:
	end;
OnKill:
	killmonster "job3_arch02","mob#arch_2::OnMyMobDead";
	end;
}

job3_arch02,389,388,1	script	start#arch	844,{
	end;
OnInit:
	mapwarp "job3_arch02","job3_arch01",29,29;
	end;
OnEnable:
	mapwarp "job3_arch02","job3_arch01",29,29;
	enablenpc "#arch_1_start";
	enablenpc "#arch_1_01";
	enablenpc "#arch_1_02";
	enablenpc "#arch_1_03";
	enablenpc "#arch_1_04";
	enablenpc "#arch_1_05";
	enablenpc "#arch_1_06";
	enablenpc "#arch_1_07";
	enablenpc "#arch_1_08";
	enablenpc "#arch_1_09";
	enablenpc "#arch_1_10";
	enablenpc "#arch_1_11";
	enablenpc "#arch_1_12";
	enablenpc "#arch_1_boss";
	disablenpc "#arch_2_01";
	disablenpc "#arch_2_02";
	disablenpc "#arch_2_03";
	disablenpc "#arch_2_04";
	disablenpc "#arch_2_05";
	disablenpc "#arch_2_06";
	disablenpc "#arch_2_07";
	disablenpc "#arch_2_08";
	disablenpc "#arch_2_09";
	disablenpc "#arch_2_10";
	disablenpc "#arch_2_11";
	disablenpc "#arch_2_boss";
	disablenpc "#arch_3_01";
	disablenpc "#arch_3_02";
	disablenpc "#arch_3_03";
	donpcevent "#arch_3_01::OnKill";
	donpcevent "#arch_3_02::OnKill";
	donpcevent "#arch_3_03::OnKill";
	disablenpc "#arch_end";
	hideonnpc "Valkyrie#arch_01";
	hideonnpc "Valkyrie#arch_02";
	hideonnpc "Valkyrie Anguhilde#end";
	hideonnpc "Valkyrie of the heavens";
	donpcevent "#arch_redcell::OnRed";
	donpcevent "mob#arch_1::OnKill";
	donpcevent "mob#arch_2::OnKill";
	donpcevent "start#arch::OnTimeOff";
	donpcevent "start#arch::OnTimeOn";
	donpcevent "#arch_val01::OnKill";
	donpcevent "#arch_val02::OnKill";
	donpcevent "mob#arch_1::OnKill";
	donpcevent "mob#arch_2::OnKill";
	donpcevent "mob#arch_1::OnEnable";
	donpcevent "#arch_val01::OnEnable";
	end;
OnTimeOn:
	initnpctimer;
	end;
OnTimeOff:
	stopnpctimer;
	end;
OnTimer60000:
OnTimer120000:
OnTimer180000:
OnTimer240000:
OnTimer300000:
OnTimer360000:
OnTimer420000:
OnTimer480000:
OnTimer540000:
	if (getmapusers("job3_arch02") == 0) {
		mapwarp "job3_arch02","job3_arch01",29,29;
		donpcevent "Valkyrie#arch::OnBc";
		stopnpctimer;
	}
	end;
OnTimer600000:
	mapannounce "job3_arch02","Ужас Валькирии: Довольно!",bc_map,"0xFF0000";
	end;
OnTimer605000:
	mapannounce "job3_arch02","Шёпот Валькирии: Нет! Я вам не позволю. Назад!",bc_map,"0xFFCE00";
	mapwarp "job3_arch02","job3_arch01",29,29;
	donpcevent "Valkyrie#arch::OnBc";
	stopnpctimer;
	end;
}

job3_arch02,390,388,1	script	#arch_2_start	844,{
	end;
OnInit:
	disablenpc "#arch_2_01";
	disablenpc "#arch_2_02";
	disablenpc "#arch_2_03";
	disablenpc "#arch_2_04";
	disablenpc "#arch_2_05";
	disablenpc "#arch_2_06";
	disablenpc "#arch_2_07";
	disablenpc "#arch_2_08";
	disablenpc "#arch_2_09";
	disablenpc "#arch_2_10";
	disablenpc "#arch_2_11";
	disablenpc "#arch_2_boss";
	end;
OnEnable:
	enablenpc "#arch_2_01";
	enablenpc "#arch_2_02";
	enablenpc "#arch_2_03";
	enablenpc "#arch_2_04";
	enablenpc "#arch_2_05";
	enablenpc "#arch_2_06";
	enablenpc "#arch_2_07";
	enablenpc "#arch_2_08";
	enablenpc "#arch_2_09";
	enablenpc "#arch_2_10";
	enablenpc "#arch_2_11";
	enablenpc "#arch_2_boss";
	donpcevent "#arch_val02::OnEnable";
	donpcevent "mob#arch_2::OnEnable";
	end;
}

job3_arch02,390,386,1	script	#arch_3_start	844,{
	end;
OnEnable:
	enablenpc "#arch_3_01";
	enablenpc "#arch_3_02";
	enablenpc "#arch_3_03";
	enablenpc "#arch_end";
	//enablenpc "#arch_end_eff";
	end;
}

job3_arch02,290,221,0	script	#arch_end_eff	139,5,5,{
OnTouch:
	specialeffect EF_MAPPILLAR2,"#arch_end";
	end;
}

/*
job_arch01,26,25,0	script	#archremove	139,3,3,{
OnTouch:
	if (countitem(6154)) delitem 6154, countitem(6154); //Broken_Horn_Pipe
	if (countitem(12381)) delitem 12381, countitem(12381); //ValkyrieA_Scroll
	if (countitem(12382)) delitem 12382, countitem(12382); //ValkyrieB_Scroll
	if (countitem(2798)) delitem 2798, countitem(2798); //Will_Of_Exhausted_Angel
	end;
}
*/

job3_arch01,1,1,1	script	control#arch	844,{
	callfunc "F_GM_NPC";
	mes "[Troll]";
	mes "Password please.";
	next;
	if (callfunc("F_GM_NPC",1854,0) == 1) {
		mes "[Transit]";
		mes "The GlobalVar is";
		mes $@archbs + ".";
		mes "Do you want to change it?";
		next;
		switch(select("0:1")) {
		case 1:
			set $@archbs,0;
			hideoffnpc "Valkyrie#arch";
			close;
		case 2:
			set $@archbs,1;
			hideoffnpc "Valkyrie#arch";
			close;
		}
	} else {
		mes "[Troll]";
		mes "Enter the correct password!";
		close;
	}
}

odin_tem02,30,181,0	script	#wherearch01	139,10,10,{
OnTouch:
	if (job_arch == 5)
		viewpoint 1,282,263,1,0xFFFF99;
	end;
}

odin_tem02,30,335,0	script	#wherearch02	139,10,10,{
OnTouch:
	if (job_arch == 5)
		viewpoint 1,282,263,1,0xFFFF99;
	end;
}
